# é…ç½®æ–‡ä»¶è¯¦è§£

`agentkit.yaml` æ˜¯é…ç½® Agent çš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…å«äº†æ‰€æœ‰è¿è¡Œå‚æ•°ã€‚æœ¬æ–‡æ¡£å¸®ä½ ç†è§£æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨ã€‚

## é…ç½®ç³»ç»Ÿæ¦‚è§ˆ

AgentKit é‡‡ç”¨**ä¸¤çº§é…ç½®**æ¶æ„ï¼š

| é…ç½®æ–‡ä»¶ | ä½ç½® | ä½œç”¨ |
|---------|------|------|
| **é¡¹ç›®é…ç½®** | `./agentkit.yaml` | é¡¹ç›®çº§é…ç½®ï¼Œæ¯ä¸ª Agent é¡¹ç›®ç‹¬ç«‹ |
| **å…¨å±€é…ç½®** | `~/.agentkit/config.yaml` | ç”¨æˆ·çº§é…ç½®ï¼Œè·¨é¡¹ç›®å…±äº«ï¼ˆå¦‚ç«å±±å¼•æ“å‡­è¯ï¼‰ |

**é…ç½®ä¼˜å…ˆçº§**ï¼š
```
ç¯å¢ƒå˜é‡ > é¡¹ç›®é…ç½® > å…¨å±€é…ç½® > é»˜è®¤å€¼
```

## æ–‡ä»¶ç»“æ„

é¡¹ç›®é…ç½®æ–‡ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š

```yaml
common:
  # åŸºç¡€é…ç½®ï¼ˆæ‰€æœ‰æ¨¡å¼é€šç”¨ï¼‰
  agent_name: my_agent
  entry_point: my_agent.py
  language: Python
  launch_type: cloud
  runtime_envs: {}           # åº”ç”¨çº§ç¯å¢ƒå˜é‡

launch_types:
  local:
    # Local æ¨¡å¼çš„ä¸“å±é…ç½®
  hybrid:
    # Hybrid æ¨¡å¼çš„ä¸“å±é…ç½®
  cloud:
    # Cloud æ¨¡å¼çš„ä¸“å±é…ç½®

docker_build:
  # Docker æ„å»ºé…ç½®ï¼ˆå¯é€‰ï¼‰
  base_image: python:3.12-slim
  build_script: scripts/setup.sh
```

**ä¸‰ä¸ªéƒ¨åˆ†**ï¼š
- **common** - é€šç”¨é…ç½®ï¼Œé€‚ç”¨äºæ‰€æœ‰éƒ¨ç½²æ¨¡å¼
- **launch_types** - é’ˆå¯¹ä¸åŒéƒ¨ç½²æ¨¡å¼çš„ç‰¹å®šé…ç½®
- **docker_build** - Docker æ„å»ºè‡ªå®šä¹‰é…ç½®ï¼ˆå¯é€‰ï¼‰

---

## common é…ç½®

æ‰€æœ‰éƒ¨ç½²æ¨¡å¼éƒ½éœ€è¦çš„åŸºç¡€é…ç½®ã€‚

### é…ç½®ç¤ºä¾‹

```yaml
common:
  agent_name: my_weather_agent        # Agent åç§°ï¼ˆå¿…å¡«ï¼‰
  entry_point: my_weather_agent.py    # å…¥å£æ–‡ä»¶ï¼ˆå¿…å¡«ï¼‰
  description: å¤©æ°”æŸ¥è¯¢ Agent          # æè¿°ï¼ˆå¯é€‰ï¼‰
  language: Python                    # ç¼–ç¨‹è¯­è¨€
  language_version: '3.12'            # è¯­è¨€ç‰ˆæœ¬
  dependencies_file: requirements.txt  # ä¾èµ–æ–‡ä»¶
  launch_type: cloud                  # éƒ¨ç½²æ¨¡å¼
  runtime_envs:                       # åº”ç”¨çº§ç¯å¢ƒå˜é‡ï¼ˆæ‰€æœ‰æ¨¡å¼å…±äº«ï¼‰
    LOG_LEVEL: info
```

### é…ç½®é¡¹è¯¦è§£

#### agent_nameï¼ˆå¿…å¡«ï¼‰

**Agent çš„åå­—**

- ğŸ“ **ä½œç”¨**ï¼šç»™ä½ çš„ Agent èµ·ä¸ªåå­—
- âœ… **è§„åˆ™**ï¼šåªèƒ½ç”¨å­—æ¯ã€æ•°å­—ã€`_` å’Œ `-`
- ğŸ¯ **ç”¨é€”**ï¼š
  - Docker é•œåƒçš„åå­—
  - äº‘ç«¯ Runtime çš„åå­—å‰ç¼€
  - é»˜è®¤çš„é•œåƒä»“åº“å

**ç¤ºä¾‹**ï¼š
```yaml
agent_name: weather_agent           # æ¨èï¼šç®€å•æ¸…æ™°
agent_name: financial-analyzer-v2   # å¯ä»¥ï¼šå¸¦ç‰ˆæœ¬å·
agent_name: customer_support_bot    # å¯ä»¥ï¼šæè¿°æ€§å¼º
```

#### entry_pointï¼ˆå¿…å¡«ï¼‰

**Agent ä»£ç çš„å…¥å£æ–‡ä»¶**

- ğŸ“ **ä½œç”¨**ï¼šæŒ‡å®šè¿è¡Œå“ªä¸ªæ–‡ä»¶
- âœ… **è§„åˆ™**ï¼šå¿…é¡»æ˜¯ `.py`ã€`.go` æˆ– `.sh` ç»“å°¾
- ğŸ¯ **ç”¨é€”**ï¼šå®¹å™¨å¯åŠ¨æ—¶è¿è¡Œè¿™ä¸ªæ–‡ä»¶

**ç¤ºä¾‹**ï¼š
```yaml
# Python é¡¹ç›®
entry_point: app.py
entry_point: server.py

# Go é¡¹ç›®
entry_point: main.go
entry_point: cmd/server/main.go

# è‡ªå®šä¹‰å¯åŠ¨è„šæœ¬
entry_point: start.sh
```

#### descriptionï¼ˆå¯é€‰ï¼‰

**Agent çš„æè¿°ä¿¡æ¯**

- ğŸ“ **ä½œç”¨**ï¼šç®€å•æè¿° Agent æ˜¯åšä»€ä¹ˆçš„
- âœ… **è§„åˆ™**ï¼šä»»æ„æ–‡å­—
- ğŸ¯ **ç”¨é€”**ï¼šå¸®åŠ©å›¢é˜Ÿæˆå‘˜ç†è§£ç”¨é€”

**ç¤ºä¾‹**ï¼š
```yaml
description: "å¤©æ°”æŸ¥è¯¢ Agentï¼Œæ”¯æŒå…¨å›½ä¸»è¦åŸå¸‚"
description: "å®¢æœåŠ©æ‰‹ï¼Œå¤„ç†å¸¸è§é—®é¢˜"
```

#### languageï¼ˆå¯é€‰ï¼‰

**ç¼–ç¨‹è¯­è¨€**

- ğŸ“ **ä½œç”¨**ï¼šæŒ‡å®šé¡¹ç›®ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€
- âœ… **é€‰é¡¹**ï¼š`Python`ã€`Golang`
- âœ… **é»˜è®¤**ï¼š`Python`
- ğŸ¯ **ç”¨é€”**ï¼šå†³å®š Dockerfile æ¨¡æ¿å’Œæ„å»ºæµç¨‹

**ç¤ºä¾‹**ï¼š
```yaml
language: Python    # Python é¡¹ç›®
language: Golang    # Go é¡¹ç›®
```

#### language_versionï¼ˆå¯é€‰ï¼‰

**è¯­è¨€è¿è¡Œç‰ˆæœ¬**

- ğŸ“ **ä½œç”¨**ï¼šæŒ‡å®šè¯­è¨€ç‰ˆæœ¬
- âœ… **Python æ”¯æŒ**ï¼š`3.10`ã€`3.11`ã€`3.12`ã€`3.13`
- âœ… **Golang æ”¯æŒ**ï¼š`1.24`
- âœ… **é»˜è®¤**ï¼šPython `3.12`ï¼ŒGolang `1.24`

**ç¤ºä¾‹**ï¼š
```yaml
# Python é¡¹ç›®
language: Python
language_version: '3.12'

# Go é¡¹ç›®
language: Golang
language_version: '1.24'
```

> âš ï¸ **æ³¨æ„**ï¼š`python_version` å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ `language_version`

#### dependencies_fileï¼ˆå¯é€‰ï¼‰

**ä¾èµ–åŒ…åˆ—è¡¨æ–‡ä»¶**

- ğŸ“ **ä½œç”¨**ï¼šæŒ‡å®šä¾èµ–æ–‡ä»¶ä½ç½®
- âœ… **é»˜è®¤**ï¼šPython é¡¹ç›®ä¸º `requirements.txt`ï¼ŒGo é¡¹ç›®ä¸º `go.mod`
- ğŸ¯ **ç”¨é€”**ï¼šæ„å»ºæ—¶å®‰è£…è¿™äº›ä¾èµ–

**ç¤ºä¾‹**ï¼š
```yaml
# Python é¡¹ç›®
dependencies_file: requirements.txt
dependencies_file: requirements/prod.txt

# Go é¡¹ç›®
dependencies_file: go.mod
```

#### launch_typeï¼ˆå¿…å¡«ï¼‰

**éƒ¨ç½²å’Œè¿è¡Œæ¨¡å¼**

- ğŸ“ **ä½œç”¨**ï¼šé€‰æ‹©åœ¨å“ªé‡Œæ„å»ºå’Œè¿è¡Œ
- âœ… **é€‰é¡¹**ï¼š`local`ã€`hybrid`ã€`cloud`

| æ¨¡å¼ | é€‚åˆåœºæ™¯ | æ„å»ºä½ç½® | è¿è¡Œä½ç½® |
|------|---------|---------|---------|
| `local` | æœ¬åœ°å¼€å‘è°ƒè¯• | æœ¬åœ°ç”µè„‘ | æœ¬åœ°ç”µè„‘ |
| `hybrid` | è¿‡æ¸¡é˜¶æ®µ | æœ¬åœ°ç”µè„‘ | äº‘ç«¯å¹³å° |
| `cloud` | ç”Ÿäº§ç¯å¢ƒ | äº‘ç«¯å¹³å° | äº‘ç«¯å¹³å° |

**ç¤ºä¾‹**ï¼š
```yaml
launch_type: local   # æœ¬åœ°å¼€å‘
launch_type: hybrid  # æœ¬åœ°æ„å»º + äº‘ç«¯éƒ¨ç½²
launch_type: cloud   # ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰
```

#### cloud_providerï¼ˆå¯é€‰ï¼‰

**äº‘å‚å•†ï¼ˆå¹³å°æœåŠ¡æä¾›æ–¹ï¼‰**

- ğŸ“ **ä½œç”¨**ï¼šé€‰æ‹©å¹³å°æœåŠ¡ä½¿ç”¨ Volcano Engineï¼ˆCNï¼‰æˆ– BytePlusï¼ˆOverseasï¼‰
- âœ… **é€‰é¡¹**ï¼š`volcengine`ã€`byteplus`
- âœ… **é»˜è®¤**ï¼š`volcengine`
- ğŸ¯ **ç”¨é€”**ï¼š
  - å½±å“é»˜è®¤ regionã€endpointã€credential å‘½åç©ºé—´
  - å½±å“è‡ªåŠ¨ç”Ÿæˆ Dockerfile çš„é»˜è®¤ base é•œåƒé€‰æ‹©ï¼ˆå½“æœªæ˜¾å¼é…ç½® `docker_build.base_image` æ—¶ï¼‰

**ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰**ï¼š
```
ç¯å¢ƒå˜é‡ > é¡¹ç›®é…ç½®(agentkit.yaml) > å…¨å±€é…ç½®(~/.agentkit/config.yaml) > é»˜è®¤å€¼
```

**é…ç½®æ–¹å¼**ï¼š
```yaml
# 1) é¡¹ç›®é…ç½®ï¼ˆæ¨èï¼šå†™è¿› agentkit.yamlï¼‰
common:
  cloud_provider: byteplus
```

```bash
# 1.1) é¡¹ç›®é…ç½®ï¼ˆéäº¤äº’å‘½ä»¤å†™å…¥ agentkit.yamlï¼‰
agentkit config --cloud_provider byteplus
```

```yaml
# 2) å…¨å±€é…ç½®ï¼ˆè·¨é¡¹ç›®ç”Ÿæ•ˆï¼‰
defaults:
  cloud_provider: byteplus
```

```bash
# 3) ç¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶è¦†ç›–ï¼‰
export CLOUD_PROVIDER=byteplus
```

#### runtime_envsï¼ˆå¯é€‰ï¼‰

**åº”ç”¨çº§ç¯å¢ƒå˜é‡**

- ğŸ“ **ä½œç”¨**ï¼šå®šä¹‰æ‰€æœ‰éƒ¨ç½²æ¨¡å¼å…±äº«çš„ç¯å¢ƒå˜é‡
- ğŸ¯ **ç”¨é€”**ï¼šä¼ é€’é€šç”¨é…ç½®ï¼Œå¦‚æ—¥å¿—çº§åˆ«
- âš ï¸ **ä¼˜å…ˆçº§**ï¼šç­–ç•¥çº§ `runtime_envs` ä¼šè¦†ç›–åº”ç”¨çº§åŒåå˜é‡

**ç¤ºä¾‹**ï¼š
```yaml
common:
  runtime_envs:
    LOG_LEVEL: info
    APP_ENV: production
```

---

## Local æ¨¡å¼é…ç½®

åœ¨æœ¬åœ° Docker ä¸Šæ„å»ºå’Œè¿è¡Œï¼Œé€‚åˆå¼€å‘è°ƒè¯•ã€‚

### é…ç½®ç¤ºä¾‹

```yaml
launch_types:
  local:
    image_tag: latest                  # é•œåƒæ ‡ç­¾
    invoke_port: 8000                  # åº”ç”¨ç«¯å£
    container_name: my_agent           # å®¹å™¨åç§°ï¼ˆå¯é€‰ï¼‰
    runtime_envs:                      # ç­–ç•¥çº§ç¯å¢ƒå˜é‡
      MODEL_AGENT_API_KEY: xxx
    ports:                             # ç«¯å£æ˜ å°„
      - "8000:8000"
    restart_policy: unless-stopped     # é‡å¯ç­–ç•¥
    memory_limit: 1g                   # å†…å­˜é™åˆ¶
    cpu_limit: '1'                     # CPU é™åˆ¶
```

### é…ç½®é¡¹è¯¦è§£

#### image_tag

**é•œåƒç‰ˆæœ¬æ ‡ç­¾**

- é»˜è®¤ï¼š`latest`
- ä½œç”¨ï¼šåŒºåˆ†ä¸åŒç‰ˆæœ¬çš„é•œåƒ
- ç¤ºä¾‹ï¼š`latest`ã€`v1.0`ã€`dev`

#### invoke_port

**Agent ç›‘å¬çš„ç«¯å£**

- é»˜è®¤ï¼š`8000`
- ä½œç”¨ï¼šæŒ‡å®šåº”ç”¨ç›‘å¬å“ªä¸ªç«¯å£
- â— å¿…é¡»ä¸ä»£ç ä¸­çš„ç«¯å£ä¸€è‡´

#### container_name

**Docker å®¹å™¨åç§°**

- é»˜è®¤ï¼šä½¿ç”¨ `agent_name`
- ä½œç”¨ï¼šç»™å®¹å™¨èµ·ä¸ªåå­—
- å¯ä»¥ç•™ç©ºï¼Œè‡ªåŠ¨ç”Ÿæˆ

#### runtime_envs

**ç­–ç•¥çº§è¿è¡Œæ—¶ç¯å¢ƒå˜é‡**

ä¼ é€’ç»™å®¹å™¨çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚ API Keyã€é…ç½®å‚æ•°ç­‰ã€‚ä¼šä¸ `common.runtime_envs` åˆå¹¶ï¼ŒåŒåå˜é‡ä¼šè¦†ç›–ã€‚

```yaml
runtime_envs:
  MODEL_AGENT_API_KEY: your_api_key  # æ¨¡å‹ API Key
  DEBUG: 'true'                      # å¼€å¯è°ƒè¯•
  LOG_LEVEL: debug                   # è¦†ç›– common ä¸­çš„æ—¥å¿—çº§åˆ«
```

#### ports

**ç«¯å£æ˜ å°„**

å°†å®¹å™¨å†…éƒ¨ç«¯å£æ˜ å°„åˆ°ä¸»æœºç«¯å£ï¼Œæ ¼å¼ï¼š`ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£`

```yaml
ports:
  - "8080:8000"  # ä¸»æœº 8080 æ˜ å°„åˆ°å®¹å™¨ 8000
  - "9090:9090"  # ç›‘æ§ç«¯å£
```

#### volumes

**å·æŒ‚è½½**

å°†ä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œæ ¼å¼ï¼š`ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„`

```yaml
volumes:
  - "./data:/app/data"      # æ•°æ®ç›®å½•
  - "./logs:/app/logs"      # æ—¥å¿—ç›®å½•
```

#### restart_policy

**å®¹å™¨é‡å¯ç­–ç•¥**

- é»˜è®¤ï¼š`unless-stopped`
- é€‰é¡¹ï¼š
  - `no` - ä¸é‡å¯
  - `on-failure` - å¤±è´¥æ—¶é‡å¯
  - `always` - æ€»æ˜¯é‡å¯
  - `unless-stopped` - é™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™é‡å¯

#### memory_limit / cpu_limit

**èµ„æºé™åˆ¶**

é™åˆ¶å®¹å™¨ä½¿ç”¨çš„èµ„æºï¼Œé˜²æ­¢å ç”¨è¿‡å¤šã€‚

```yaml
memory_limit: 2g    # é™åˆ¶ 2GB å†…å­˜
cpu_limit: '1'      # é™åˆ¶ 1 ä¸ª CPU æ ¸
```

### è‡ªåŠ¨ç®¡ç†çš„å­—æ®µ

ä»¥ä¸‹å­—æ®µç”± CLI è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ï¼Œ**ä¸éœ€è¦æ‰‹åŠ¨é…ç½®**ï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `container_id` | éƒ¨ç½²åçš„å®¹å™¨ ID |
| `image_id` | æ„å»ºåçš„é•œåƒ ID |
| `build_timestamp` | æ„å»ºæ—¶é—´ |
| `deploy_timestamp` | éƒ¨ç½²æ—¶é—´ |
| `full_image_name` | å®Œæ•´é•œåƒåï¼ˆå¦‚ `my-agent:latest`ï¼‰ |

---

## Cloud æ¨¡å¼é…ç½®

åœ¨ç«å±±å¼•æ“ä¸Šæ„å»ºå’Œè¿è¡Œï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒã€‚

### é…ç½®ç¤ºä¾‹

```yaml
launch_types:
  cloud:
    region: cn-beijing                       # åŒºåŸŸ
    image_tag: "{{timestamp}}"               # é•œåƒæ ‡ç­¾ï¼ˆæ”¯æŒæ¨¡æ¿å˜é‡ï¼‰
    
    # TOS å¯¹è±¡å­˜å‚¨é…ç½®
    tos_bucket: Auto                         # è‡ªåŠ¨åˆ›å»ºå­˜å‚¨æ¡¶
    
    # Container Registry é…ç½®
    cr_instance_name: Auto                   # CR å®ä¾‹åï¼ˆAuto = è‡ªåŠ¨åˆ›å»ºï¼‰
    cr_namespace_name: agentkit              # CR å‘½åç©ºé—´
    cr_repo_name: ""                         # CR ä»“åº“åï¼ˆç©º = ä½¿ç”¨ agent_nameï¼‰
    
    # Runtime é…ç½®
    runtime_name: Auto                       # Runtime åç§°
    runtime_role_name: Auto                  # æˆæƒè§’è‰²å
    runtime_apikey_name: Auto                # API Key å¯†é’¥å
    
    # ç¯å¢ƒå˜é‡
    runtime_envs:
      MODEL_AGENT_API_KEY: xxx               # æ¨¡å‹ API Key
      MODEL_AGENT_NAME: ep-xxx               # æ¨¡å‹æ¥å…¥ç‚¹
```

### æ¨¡æ¿å˜é‡

Cloud æ¨¡å¼æ”¯æŒ**æ¨¡æ¿å˜é‡**ï¼Œåœ¨æ„å»º/éƒ¨ç½²æ—¶è‡ªåŠ¨æ¸²æŸ“ï¼š

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `{{timestamp}}` | å½“å‰æ—¶é—´æˆ³ï¼ˆYYYYMMDDHHmmssï¼‰ | `20251128153042` |
| `{{account_id}}` | ç«å±±å¼•æ“è´¦å· ID | `2100123456` |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```yaml
image_tag: "{{timestamp}}"                          # æ¯æ¬¡æ„å»ºå”¯ä¸€ tag
cr_instance_name: "agentkit-platform-{{account_id}}"     # è´¦å·éš”ç¦»çš„ CR å®ä¾‹
tos_bucket: "agentkit-platform-{{account_id}}"           # è´¦å·éš”ç¦»çš„å­˜å‚¨æ¡¶
```

### Auto å…³é”®å­—

å½“é…ç½®å€¼ä¸º `Auto` æ—¶ï¼ŒCLI ä¼šè‡ªåŠ¨åˆ›å»ºæˆ–ç®¡ç†å¯¹åº”èµ„æºï¼š

| å­—æ®µ | Auto è¡Œä¸º |
|------|----------|
| `tos_bucket` | è‡ªåŠ¨åˆ›å»ºå­˜å‚¨æ¡¶ `agentkit-platform-{{account_id}}` |
| `cr_instance_name` | è‡ªåŠ¨åˆ›å»º CR å®ä¾‹ `agentkit-platform-{{account_id}}` |
| `runtime_name` | è‡ªåŠ¨åˆ›å»º Runtime |
| `runtime_role_name` | è‡ªåŠ¨åˆ›å»ºæˆæƒè§’è‰² |
| `runtime_apikey_name` | è‡ªåŠ¨åˆ›å»º API Key å¯†é’¥ |

### é…ç½®é¡¹è¯¦è§£

#### region

**ç«å±±å¼•æ“åŒºåŸŸ**

- é»˜è®¤ï¼š`cn-beijing`
- ä½œç”¨ï¼šé€‰æ‹©æœåŠ¡è¿è¡Œçš„åœ°ç†ä½ç½®
- å¯é€‰ï¼š`cn-beijing`ï¼ˆç›®å‰ä»…æ”¯æŒåŒ—äº¬åŒºåŸŸï¼‰

ğŸ’¡ **å»ºè®®**ï¼šé€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸï¼Œé™ä½å»¶è¿Ÿ

#### image_tag

**é•œåƒç‰ˆæœ¬æ ‡ç­¾**

- é»˜è®¤ï¼š`{{timestamp}}`ï¼ˆæ¯æ¬¡æ„å»ºç”Ÿæˆå”¯ä¸€æ ‡ç­¾ï¼‰
- ä½œç”¨ï¼šåŒºåˆ†ä¸åŒç‰ˆæœ¬
- ç¤ºä¾‹ï¼š`{{timestamp}}`ã€`latest`ã€`v1.0.0`

```yaml
# æ–¹å¼ 1ï¼šä½¿ç”¨æ—¶é—´æˆ³ï¼ˆæ¨èï¼Œç¡®ä¿æ¯æ¬¡æ„å»ºå”¯ä¸€ï¼‰
image_tag: "{{timestamp}}"

# æ–¹å¼ 2ï¼šå›ºå®šç‰ˆæœ¬
image_tag: v1.0.0

# æ–¹å¼ 3ï¼šä½¿ç”¨ latestï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ï¼‰
image_tag: latest
```

#### tos_bucket

**å¯¹è±¡å­˜å‚¨æ¡¶**

- é»˜è®¤ï¼š`Auto`ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- ä½œç”¨ï¼šå­˜å‚¨ä»£ç å‹ç¼©åŒ…ï¼ˆç”¨äºäº‘ç«¯æ„å»ºï¼‰
- å®‰å…¨è¯´æ˜ï¼š`tos_bucket` å¿…é¡»ä¸ºå½“å‰è´¦å·åä¸‹çš„æ¡¶ï¼›å¦‚æœå¡«å†™äº†ä»–äººï¼ˆä¾‹å¦‚å…¬å…±è¯»å†™ï¼‰æ¡¶åï¼Œå·¥å…·ä¼šé˜»æ­¢ä¸Šä¼ å¹¶æç¤ºæ›´æ¢

```yaml
# è‡ªåŠ¨åˆ›å»ºï¼ˆæ¨èï¼‰
tos_bucket: Auto

# ä½¿ç”¨å·²æœ‰å­˜å‚¨æ¡¶
tos_bucket: my-existing-bucket
```

#### cr_instance_name

**Container Registry å®ä¾‹å**

- é»˜è®¤ï¼š`Auto`ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- ä½œç”¨ï¼šDocker é•œåƒå­˜å‚¨åœ¨å“ªä¸ª CR å®ä¾‹

```yaml
# è‡ªåŠ¨åˆ›å»º
cr_instance_name: Auto

# ä½¿ç”¨å·²æœ‰å®ä¾‹
cr_instance_name: my-existing-cr
```

#### cr_namespace_name

**CR å‘½åç©ºé—´**

- é»˜è®¤ï¼š`agentkit`
- ä½œç”¨ï¼šç»„ç»‡å’Œç®¡ç†é•œåƒ
- è‡ªåŠ¨åˆ›å»ºï¼šä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º

#### cr_repo_name

**CR ä»“åº“åç§°**

- é»˜è®¤ï¼šç©ºï¼ˆä½¿ç”¨ `agent_name`ï¼‰
- ä½œç”¨ï¼šå­˜å‚¨é•œåƒçš„ä»“åº“
- è‡ªåŠ¨åˆ›å»ºï¼šä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º

#### runtime_name / runtime_role_name / runtime_apikey_name

**Runtime ç›¸å…³é…ç½®**

- é»˜è®¤ï¼š`Auto`ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- ä½œç”¨ï¼šç®¡ç†äº‘ç«¯è¿è¡Œæ—¶å®ä¾‹åŠå…¶è®¤è¯

```yaml
runtime_name: Auto           # Runtime åç§°
runtime_role_name: Auto      # IAM æˆæƒè§’è‰²
runtime_apikey_name: Auto    # API Key å¯†é’¥å
```

#### runtime_envs

**ç­–ç•¥çº§è¿è¡Œæ—¶ç¯å¢ƒå˜é‡**

Agent è¿è¡Œæ—¶éœ€è¦çš„é…ç½®ï¼Œæœ€é‡è¦çš„æ˜¯æ¨¡å‹ API å‡­è¯ã€‚ä¼šä¸ `common.runtime_envs` åˆå¹¶ã€‚

**å¿…é¡»é…ç½®**ï¼š
```yaml
runtime_envs:
  MODEL_AGENT_API_KEY: xxx  # ç«å±±æ–¹èˆŸ API Key
  MODEL_AGENT_NAME: ep-xxx  # ç«å±±æ–¹èˆŸæ¥å…¥ç‚¹ ID
```

**å¯é€‰é…ç½®**ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰ï¼š
```yaml
runtime_envs:
  # åŸºç¡€é…ç½®
  MODEL_AGENT_API_KEY: xxx
  MODEL_AGENT_NAME: ep-xxx
  
  # å¯è§‚æµ‹æ€§ï¼ˆæ—¥å¿—ã€ç›‘æ§ã€é“¾è·¯è¿½è¸ªï¼‰
  OBSERVABILITY_OPENTELEMETRY_APMPLUS_API_KEY: xxx
  OBSERVABILITY_OPENTELEMETRY_APMPLUS_ENDPOINT: http://apmplus-cn-beijing.volces.com:4317
  OBSERVABILITY_OPENTELEMETRY_APMPLUS_SERVICE_NAME: my_agent
  
  # å…¶ä»–é…ç½®
  DEBUG: 'true'     # å¼€å¯è°ƒè¯•æ¨¡å¼
  LOG_LEVEL: info   # è®¾ç½®æ—¥å¿—çº§åˆ«
```

#### build_timeout

**æ„å»ºè¶…æ—¶æ—¶é—´**

- é»˜è®¤ï¼š`3600`ï¼ˆç§’ï¼‰
- ä½œç”¨ï¼šäº‘ç«¯æ„å»ºçš„æœ€å¤§ç­‰å¾…æ—¶é—´

### è‡ªåŠ¨ç®¡ç†çš„å­—æ®µ

ä»¥ä¸‹å­—æ®µç”± CLI è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ï¼Œ**ä¸éœ€è¦æ‰‹åŠ¨é…ç½®**ï¼š

**TOS å­˜å‚¨ç›¸å…³**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `tos_prefix` | å¯¹è±¡å­˜å‚¨å‰ç¼€ï¼ˆé»˜è®¤ `agentkit-builds`ï¼‰ |
| `tos_region` | TOS æœåŠ¡åŒºåŸŸ |
| `tos_object_key` | ä»£ç åŒ…çš„å­˜å‚¨è·¯å¾„ |
| `tos_object_url` | ä»£ç åŒ…çš„è®¿é—®åœ°å€ |

**Code Pipeline æ„å»ºç›¸å…³**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `cp_workspace_name` | æ„å»ºå·¥ä½œåŒºåç§° |
| `cp_pipeline_name` | æ„å»ºæµæ°´çº¿åç§° |
| `cp_pipeline_id` | æµæ°´çº¿ ID |

**é•œåƒç›¸å…³**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `cr_region` | é•œåƒä»“åº“åŒºåŸŸ |
| `cr_image_full_url` | å®Œæ•´çš„é•œåƒ URL |

**Runtime è¿è¡Œæ—¶ç›¸å…³**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `runtime_id` | Runtime å®ä¾‹ ID |
| `runtime_endpoint` | åº”ç”¨è®¿é—®åœ°å€ |
| `runtime_apikey` | Runtime API å¯†é’¥ |
| `build_timestamp` | æ„å»ºæ—¶é—´ |
| `deploy_timestamp` | éƒ¨ç½²æ—¶é—´ |

---

## Hybrid æ¨¡å¼é…ç½®

æœ¬åœ°æ„å»ºï¼Œäº‘ç«¯è¿è¡Œã€‚é€‚åˆå¼€å‘è°ƒè¯•é˜¶æ®µï¼Œæœ¬åœ°å¿«é€Ÿæ„å»ºé•œåƒåæ¨é€åˆ°äº‘ç«¯è¿è¡Œã€‚

### é…ç½®ç¤ºä¾‹

```yaml
launch_types:
  hybrid:
    region: cn-beijing                       # äº‘ç«¯åŒºåŸŸ
    image_tag: "{{timestamp}}"               # é•œåƒæ ‡ç­¾ï¼ˆæ”¯æŒæ¨¡æ¿å˜é‡ï¼‰
    
    # Container Registry é…ç½®
    cr_instance_name: Auto                   # CR å®ä¾‹å
    cr_namespace_name: agentkit              # CR å‘½åç©ºé—´
    cr_repo_name: ""                         # CR ä»“åº“å
    
    # Runtime é…ç½®
    runtime_name: Auto                       # Runtime åç§°
    runtime_role_name: Auto                  # æˆæƒè§’è‰²å
    runtime_apikey_name: Auto                # API Key å¯†é’¥å
    
    # ç¯å¢ƒå˜é‡
    runtime_envs:
      MODEL_AGENT_API_KEY: xxx               # æ¨¡å‹ API Key
      MODEL_AGENT_NAME: ep-xxx               # æ¨¡å‹æ¥å…¥ç‚¹
```

### ä¸ Cloud æ¨¡å¼çš„åŒºåˆ«

| å¯¹æ¯”é¡¹ | Hybrid æ¨¡å¼ | Cloud æ¨¡å¼ |
|-------|------------|-----------|
| **æ„å»ºä½ç½®** | æœ¬åœ° Docker | äº‘ç«¯ Code Pipeline |
| **TOS é…ç½®** | ä¸éœ€è¦ | éœ€è¦ï¼ˆå­˜å‚¨ä»£ç åŒ…ï¼‰ |
| **æ„å»ºé€Ÿåº¦** | å¿«ï¼ˆæœ¬åœ°ï¼‰ | è¾ƒæ…¢ï¼ˆä¸Šä¼ +äº‘ç«¯æ„å»ºï¼‰ |
| **é€‚ç”¨åœºæ™¯** | å¼€å‘è°ƒè¯• | ç”Ÿäº§ç¯å¢ƒ |

### é…ç½®é¡¹è¯¦è§£

Hybrid æ¨¡å¼çš„é…ç½®é¡¹ä¸ Cloud æ¨¡å¼åŸºæœ¬ä¸€è‡´ï¼Œä½†**ä¸éœ€è¦ TOS ç›¸å…³é…ç½®**ï¼ˆå› ä¸ºæœ¬åœ°æ„å»ºä¸éœ€è¦ä¸Šä¼ ä»£ç åŒ…ï¼‰ã€‚

#### region

**ç«å±±å¼•æ“åŒºåŸŸ**

- é»˜è®¤ï¼š`cn-beijing`
- ä½œç”¨ï¼šé€‰æ‹©äº‘ç«¯æœåŠ¡è¿è¡Œçš„åœ°ç†ä½ç½®

#### image_tag

**é•œåƒç‰ˆæœ¬æ ‡ç­¾**

- é»˜è®¤ï¼š`{{timestamp}}`
- ä½œç”¨ï¼šåŒºåˆ†ä¸åŒç‰ˆæœ¬çš„é•œåƒ
- æ”¯æŒæ¨¡æ¿å˜é‡

#### cr_instance_name / cr_namespace_name / cr_repo_name

**Container Registry é…ç½®**

ä¸ Cloud æ¨¡å¼ç›¸åŒï¼Œç”¨äºå­˜å‚¨æœ¬åœ°æ„å»ºçš„é•œåƒã€‚

```yaml
cr_instance_name: Auto          # è‡ªåŠ¨åˆ›å»º CR å®ä¾‹
cr_namespace_name: agentkit     # å‘½åç©ºé—´
cr_repo_name: ""                # ä»“åº“åï¼ˆç©º = ä½¿ç”¨ agent_nameï¼‰
```

#### runtime_name / runtime_role_name / runtime_apikey_name

**Runtime é…ç½®**

ä¸ Cloud æ¨¡å¼ç›¸åŒï¼Œç®¡ç†äº‘ç«¯è¿è¡Œæ—¶å®ä¾‹ã€‚

#### runtime_envs

**ç­–ç•¥çº§è¿è¡Œæ—¶ç¯å¢ƒå˜é‡**

ä¸ Cloud æ¨¡å¼ç›¸åŒï¼Œä¼ é€’ç»™äº‘ç«¯è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡ã€‚

### è‡ªåŠ¨ç®¡ç†çš„å­—æ®µ

ä»¥ä¸‹å­—æ®µç”± CLI è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ï¼Œ**ä¸éœ€è¦æ‰‹åŠ¨é…ç½®**ï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `image_id` | æœ¬åœ°æ„å»ºçš„é•œåƒ ID |
| `build_timestamp` | æ„å»ºæ—¶é—´ |
| `full_image_name` | å®Œæ•´é•œåƒå |
| `cr_image_full_url` | CR ä¸­çš„å®Œæ•´é•œåƒ URL |
| `runtime_id` | Runtime å®ä¾‹ ID |
| `runtime_endpoint` | åº”ç”¨è®¿é—®åœ°å€ |
| `runtime_apikey` | Runtime API å¯†é’¥ |

---

## docker_build é…ç½®

è‡ªå®šä¹‰ Docker æ„å»ºè¿‡ç¨‹ï¼Œæ”¯æŒè‡ªå®šä¹‰åŸºç¡€é•œåƒã€æ„å»ºè„šæœ¬ç­‰ã€‚

### é…ç½®ç¤ºä¾‹

```yaml
docker_build:
  # Python é¡¹ç›® - å­—ç¬¦ä¸²æ ¼å¼
  base_image: "python:3.12-slim"
  
  # è‡ªå®šä¹‰æ„å»ºè„šæœ¬
  build_script: "scripts/setup.sh"
  
  # å¼ºåˆ¶é‡æ–°ç”Ÿæˆ Dockerfile
  regenerate_dockerfile: false
  
  # ç›®æ ‡å¹³å°ï¼ˆè·¨å¹³å°æ„å»ºï¼‰
  platform: "linux/amd64"
```

**Go é¡¹ç›®å¤šé˜¶æ®µæ„å»º**ï¼š
```yaml
docker_build:
  base_image:
    builder: "golang:1.24-alpine"    # æ„å»ºé˜¶æ®µé•œåƒ
    runtime: "alpine:latest"         # è¿è¡Œæ—¶é•œåƒ
  build_script: "scripts/install_certs.sh"
```

### é…ç½®é¡¹è¯¦è§£

#### base_image

**è‡ªå®šä¹‰åŸºç¡€é•œåƒ**

- é»˜è®¤ï¼šæ ¹æ®è¯­è¨€è‡ªåŠ¨é€‰æ‹©
- Python é»˜è®¤ï¼šä½¿ç”¨ AgentKit é¢„ç½® base é•œåƒï¼Œå¹¶éš `common.cloud_provider` è‡ªåŠ¨åˆ‡æ¢
  - volcengineï¼š`agentkit-prod-public-cn-beijing.cr.volces.com/base/py-simple:python<version>-bookworm-slim-latest`
  - byteplusï¼š`agentkit-prod-public-ap-southeast-1.cr.bytepluses.com/base/py-simple:python<version>-bookworm-slim-latest`
- Golang é»˜è®¤ï¼š`agentkit-cn-beijing.cr.volces.com/base/compile_basego:1.24`ï¼ˆæ„å»ºï¼‰+ `agentkit-cn-beijing.cr.volces.com/base/runtime_basego:latest`ï¼ˆè¿è¡Œï¼‰

```yaml
# Python é¡¹ç›® - å­—ç¬¦ä¸²
base_image: "python:3.12-alpine"

# Go é¡¹ç›® - å­—å…¸ï¼ˆå¤šé˜¶æ®µæ„å»ºï¼‰
base_image:
  builder: "golang:1.24-alpine"
  runtime: "alpine:latest"
```

#### build_script

**è‡ªå®šä¹‰æ„å»ºè„šæœ¬**

- é»˜è®¤ï¼šæ— 
- ä½œç”¨ï¼šåœ¨ Docker æ„å»ºè¿‡ç¨‹ä¸­æ‰§è¡Œè‡ªå®šä¹‰è„šæœ¬
- è·¯å¾„ï¼šç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•

**ä½¿ç”¨åœºæ™¯**ï¼š
- å®‰è£…ç³»ç»Ÿä¾èµ–
- ç¼–è¯‘ C æ‰©å±•
- ä¸‹è½½é¢å¤–èµ„æº

```yaml
build_script: "scripts/setup.sh"
build_script: "docker/install_deps.sh"
```

#### regenerate_dockerfile

**å¼ºåˆ¶é‡æ–°ç”Ÿæˆ Dockerfile**

- é»˜è®¤ï¼š`false`
- ä½œç”¨ï¼šå³ä½¿ Dockerfile å·²å­˜åœ¨ï¼Œä¹Ÿé‡æ–°ç”Ÿæˆ
- CLI å‚æ•°ï¼š`--regenerate-dockerfile`

#### platform

**ç›®æ ‡ CPU æ¶æ„**

- é»˜è®¤ï¼šå½“å‰ç³»ç»Ÿæ¶æ„
- ä½œç”¨ï¼šè·¨å¹³å°æ„å»º
- CLI å‚æ•°ï¼š`--platform`

```yaml
platform: "linux/amd64"    # x86_64 æ¶æ„
platform: "linux/arm64"    # ARM æ¶æ„ï¼ˆå¦‚ Apple Siliconï¼‰
```

---

## å…¨å±€é…ç½®

å…¨å±€é…ç½®å­˜å‚¨åœ¨ `~/.agentkit/config.yaml`ï¼Œè·¨é¡¹ç›®å…±äº«ã€‚

### é…ç½®æ–‡ä»¶ä½ç½®

```
~/.agentkit/config.yaml
```

### é…ç½®ç¤ºä¾‹

```yaml
# ç«å±±å¼•æ“å‡­è¯
volcengine:
  access_key: "AKLTxxxxxxxx"
  secret_key: "xxxxxxxx"
  region: "cn-beijing"

# Container Registry é»˜è®¤é…ç½®
cr:
  instance_name: "my-team-cr-instance"
  namespace_name: "my-team"

# TOS é»˜è®¤é…ç½®
tos:
  bucket: "my-team-bucket"
  prefix: "agentkit-builds"
  region: "cn-beijing"
```

### é…ç½®ä¼˜å…ˆçº§

å½“é¡¹ç›®é…ç½®ä¸ºç©ºæˆ– `Auto` æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨å…¨å±€é…ç½®ï¼š

```
1. é¡¹ç›®é…ç½®æ˜ç¡®è®¾ç½®çš„å€¼ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. å…¨å±€é…ç½® (~/.agentkit/config.yaml)
3. é»˜è®¤å€¼ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰
```

### ä½¿ç”¨åœºæ™¯

**å›¢é˜Ÿå…±äº«é…ç½®**ï¼š

å›¢é˜Ÿæˆå‘˜å¯ä»¥å…±äº«ç›¸åŒçš„ CR å®ä¾‹å’Œ TOS å­˜å‚¨æ¡¶ï¼š

```yaml
# ~/.agentkit/config.yaml
cr:
  instance_name: "team-shared-cr"
  namespace_name: "team-agents"

tos:
  bucket: "team-shared-bucket"
```

é¡¹ç›®é…ç½®åªéœ€è®¾ç½® `Auto`ï¼Œå³å¯è‡ªåŠ¨ä½¿ç”¨å›¢é˜Ÿé…ç½®ï¼š

```yaml
# agentkit.yaml
launch_types:
  cloud:
    cr_instance_name: Auto    # ä½¿ç”¨å…¨å±€é…ç½®ä¸­çš„ team-shared-cr
    tos_bucket: Auto          # ä½¿ç”¨å…¨å±€é…ç½®ä¸­çš„ team-shared-bucket
```

---

## æœ€ä½³å®è·µ

### ğŸŒ å¤šç¯å¢ƒç®¡ç†

ä¸ºä¸åŒç¯å¢ƒåˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶ï¼š

```bash
agentkit.dev.yaml   # å¼€å‘ç¯å¢ƒï¼ˆlocal æ¨¡å¼ï¼‰
agentkit.test.yaml  # æµ‹è¯•ç¯å¢ƒï¼ˆhybrid æ¨¡å¼ï¼‰
agentkit.prod.yaml  # ç”Ÿäº§ç¯å¢ƒï¼ˆcloud æ¨¡å¼ï¼‰
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# å¼€å‘
agentkit launch --config-file agentkit.dev.yaml

# ç”Ÿäº§
agentkit launch --config-file agentkit.prod.yaml
```

### ğŸ” å®‰å…¨ç®¡ç†æ•æ„Ÿä¿¡æ¯

**âŒ é”™è¯¯åšæ³•**ï¼ˆç¡¬ç¼–ç ï¼‰ï¼š
```yaml
runtime_envs:
  MODEL_AGENT_API_KEY: c05d49af-1234-5678-abcd-xxxx  # ä¸è¦è¿™æ ·ï¼
```

**âœ… æ­£ç¡®åšæ³•**ï¼š

**æ–¹æ¡ˆ 1**ï¼šäº¤äº’å¼é…ç½®
```bash
agentkit config  # è¿è¡Œæ—¶è¾“å…¥æ•æ„Ÿä¿¡æ¯
```

**æ–¹æ¡ˆ 2**ï¼šä½¿ç”¨ .gitignore
```bash
# .gitignore æ–‡ä»¶
agentkit.local.yaml    # æœ¬åœ°é…ç½®ä¸æäº¤
agentkit.prod.yaml     # ç”Ÿäº§é…ç½®ä¸æäº¤
*.secret.yaml          # æ‰€æœ‰åŒ…å«å¯†é’¥çš„é…ç½®
```

**æ–¹æ¡ˆ 3**ï¼šåˆ›å»ºé…ç½®æ¨¡æ¿
```yaml
# agentkit.yaml.template ï¼ˆæäº¤åˆ° Gitï¼‰
runtime_envs:
  MODEL_AGENT_API_KEY: <è¯·å¡«å†™ä½ çš„ API Key>
  MODEL_AGENT_NAME: <è¯·å¡«å†™æ¥å…¥ç‚¹ ID>
```

### ğŸ“ æ·»åŠ é…ç½®æ³¨é‡Š

è®©å›¢é˜Ÿæˆå‘˜æ›´å®¹æ˜“ç†è§£é…ç½®ï¼š

```yaml
common:
  agent_name: weather_agent
  entry_point: app.py
  launch_type: cloud  # ç”Ÿäº§ç¯å¢ƒä½¿ç”¨äº‘ç«¯éƒ¨ç½²

launch_types:
  cloud:
    region: cn-beijing  # åŒ—äº¬åŒºåŸŸï¼Œç¦»ç”¨æˆ·æœ€è¿‘
    runtime_envs:
      # ç«å±±æ–¹èˆŸçš„æ¨¡å‹è®¿é—®å‡­è¯
      MODEL_AGENT_API_KEY: xxx
      MODEL_AGENT_NAME: ep-xxx
```

### âœ… å®šæœŸéªŒè¯é…ç½®

ç¡®ä¿é…ç½®æ–‡ä»¶å§‹ç»ˆæœ‰æ•ˆï¼š

```bash
# æ–¹å¼ 1ï¼šè¿è¡Œé…ç½®å‘½ä»¤æ£€æŸ¥
agentkit config

# æ–¹å¼ 2ï¼šæŸ¥çœ‹é…ç½®å†…å®¹
cat agentkit.yaml

# æ–¹å¼ 3ï¼šå°è¯•æ„å»ºï¼ˆä¸éƒ¨ç½²ï¼‰
agentkit build
```

---

## å®Œæ•´ç¤ºä¾‹

### ğŸ“± æœ¬åœ°å¼€å‘é…ç½®ï¼ˆPythonï¼‰

é€‚åˆå¿«é€Ÿå¼€å‘å’Œè°ƒè¯•ï¼š

```yaml
common:
  agent_name: dev_weather_agent
  entry_point: app.py
  description: å¼€å‘ç¯å¢ƒçš„å¤©æ°”æŸ¥è¯¢ Agent
  language: Python
  language_version: '3.12'
  launch_type: local
  runtime_envs:
    APP_ENV: development

launch_types:
  local:
    image_tag: dev
    invoke_port: 8000
    runtime_envs:
      MODEL_AGENT_API_KEY: xxx
      DEBUG: 'true'         # å¼€å¯è°ƒè¯•
      LOG_LEVEL: debug      # è¯¦ç»†æ—¥å¿—
    ports:
      - "8000:8000"
    memory_limit: 512m      # å¼€å‘ç¯å¢ƒèµ„æºé™åˆ¶å°ä¸€äº›
    cpu_limit: '0.5'
```

### ï¿½ Golang é¡¹ç›®é…ç½®

Go è¯­è¨€ Agent çš„é…ç½®ç¤ºä¾‹ï¼š

```yaml
common:
  agent_name: go_agent
  entry_point: main.go
  description: Go è¯­è¨€ Agent
  language: Golang
  language_version: '1.24'
  dependencies_file: go.mod
  launch_type: hybrid

launch_types:
  hybrid:
    region: cn-beijing
    image_tag: "{{timestamp}}"
    cr_instance_name: Auto
    cr_namespace_name: agentkit
    runtime_envs:
      MODEL_AGENT_API_KEY: xxx

docker_build:
  base_image:
    builder: "golang:1.24-alpine"
    runtime: "alpine:latest"
```

### ï¿½ ç”Ÿäº§ç¯å¢ƒé…ç½®

é€‚åˆæ­£å¼ä¸Šçº¿ï¼š

```yaml
common:
  agent_name: prod_weather_agent
  entry_point: server.py
  description: ç”Ÿäº§ç¯å¢ƒçš„å¤©æ°”æŸ¥è¯¢ Agent
  language: Python
  language_version: '3.12'
  launch_type: cloud
  runtime_envs:
    APP_ENV: production
    LOG_LEVEL: info

launch_types:
  cloud:
    region: cn-beijing
    image_tag: "{{timestamp}}"    # ä½¿ç”¨æ—¶é—´æˆ³ç¡®ä¿å”¯ä¸€
    
    # CR é…ç½®
    cr_instance_name: Auto
    cr_namespace_name: production
    cr_repo_name: weather_agent
    
    # TOS é…ç½®
    tos_bucket: Auto
    
    # Runtime é…ç½®
    runtime_name: Auto
    runtime_role_name: Auto
    runtime_apikey_name: Auto
    
    runtime_envs:
      # åŸºç¡€é…ç½®
      MODEL_AGENT_API_KEY: xxx
      MODEL_AGENT_NAME: ep-xxx
      
      # å¯è§‚æµ‹æ€§ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èå¼€å¯ï¼‰
      OBSERVABILITY_OPENTELEMETRY_APMPLUS_API_KEY: xxx
      OBSERVABILITY_OPENTELEMETRY_APMPLUS_ENDPOINT: http://apmplus-cn-beijing.volces.com:4317
      OBSERVABILITY_OPENTELEMETRY_APMPLUS_SERVICE_NAME: prod_weather_agent

docker_build:
  base_image: "python:3.12-slim"
```

### ğŸ¯ æœ€å°é…ç½®ç¤ºä¾‹

**Local æ¨¡å¼**ï¼ˆæœ€ç®€é…ç½®ï¼‰ï¼š
```yaml
common:
  agent_name: simple-agent
  entry_point: agent.py
  launch_type: local
```

**Cloud æ¨¡å¼**ï¼ˆæœ€ç®€é…ç½®ï¼‰ï¼š
```yaml
common:
  agent_name: cloud-agent
  entry_point: main.py
  launch_type: cloud

launch_types:
  cloud:
    region: cn-beijing
    runtime_envs:
      MODEL_AGENT_API_KEY: xxx
```

---

## å¸¸è§é—®é¢˜

### â“ é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°

```
Error: Configuration file not found
```

**è§£å†³**ï¼š
```bash
agentkit init my_agent  # åˆ›å»ºæ–°é¡¹ç›®
# æˆ–
agentkit config         # åˆ›å»ºé…ç½®
```

### â“ YAML æ ¼å¼é”™è¯¯

```
Error: Invalid YAML format
```

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… ä½¿ç”¨ç©ºæ ¼ç¼©è¿›ï¼ˆä¸è¦ç”¨ Tabï¼‰
- âœ… æ£€æŸ¥å†’å·åé¢æœ‰ç©ºæ ¼
- âœ… å­—ç¬¦ä¸²åŒ…å«ç‰¹æ®Šå­—ç¬¦è¦åŠ å¼•å·
- âœ… æ¨¡æ¿å˜é‡ç”¨å¼•å·åŒ…è£¹ï¼š`"{{timestamp}}"`

### â“ å¿…å¡«é¡¹ç¼ºå¤±

```
Error: agent_name is required
```

**è§£å†³**ï¼š
```bash
agentkit config  # é‡æ–°é…ç½®ï¼Œå¡«å†™å¿…å¡«é¡¹
```

### â“ æ¨¡æ¿å˜é‡æ¸²æŸ“å¤±è´¥

```
Error: Config field 'cr_instance_name' template variables were not fully rendered
```

**å¯èƒ½åŸå› **ï¼š
1. ç«å±±å¼•æ“å‡­è¯æœªé…ç½®
2. AK/SK æƒé™ä¸è¶³

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $VOLC_ACCESSKEY
echo $VOLC_SECRETKEY

# æˆ–æ£€æŸ¥å…¨å±€é…ç½®
cat ~/.agentkit/config.yaml
```

### â“ ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**å¯èƒ½åŸå› **ï¼š
1. å˜é‡åæ‹¼å†™é”™è¯¯
2. é…ç½®æ²¡æœ‰ä¿å­˜
3. æ²¡æœ‰é‡æ–°éƒ¨ç½²
4. `common.runtime_envs` å’Œç­–ç•¥çº§ `runtime_envs` æ··æ·†

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. æ£€æŸ¥é…ç½®
cat agentkit.yaml

# 2. ç¡®è®¤ç¯å¢ƒå˜é‡ä½ç½®æ­£ç¡®
# common.runtime_envs - æ‰€æœ‰æ¨¡å¼å…±äº«
# launch_types.<mode>.runtime_envs - è¯¥æ¨¡å¼ä¸“ç”¨

# 3. é‡æ–°éƒ¨ç½²
agentkit deploy
```

### â“ æ—§é…ç½®å­—æ®µåä¸å…¼å®¹

å¦‚æœä½ çš„é…ç½®æ–‡ä»¶ä½¿ç”¨æ—§ç‰ˆå­—æ®µåï¼ˆå¦‚ `ve_cr_instance_name`ã€`python_version`ï¼‰ï¼Œè¯·æ›´æ–°ä¸ºæ–°åç§°ï¼š

| æ—§å­—æ®µå | æ–°å­—æ®µå |
|---------|---------|
| `python_version` | `language_version` |
| `ve_cr_instance_name` | `cr_instance_name` |
| `ve_cr_namespace_name` | `cr_namespace_name` |
| `ve_cr_repo_name` | `cr_repo_name` |
| `ve_runtime_id` | `runtime_id` |
| `ve_runtime_name` | `runtime_name` |
| `ve_runtime_endpoint` | `runtime_endpoint` |

> ğŸ’¡ **æç¤º**ï¼šCLI ä»ç„¶æ”¯æŒæ—§å­—æ®µåï¼ˆé€šè¿‡ aliasesï¼‰ï¼Œä½†å»ºè®®è¿ç§»åˆ°æ–°åç§°ã€‚

---

## é…ç½®å­—æ®µé€ŸæŸ¥è¡¨

### common å­—æ®µ

| å­—æ®µ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| `agent_name` | âœ… | - | Agent åç§° |
| `entry_point` | âœ… | - | å…¥å£æ–‡ä»¶ |
| `description` | âŒ | ç©º | æè¿°ä¿¡æ¯ |
| `language` | âŒ | `Python` | ç¼–ç¨‹è¯­è¨€ |
| `language_version` | âŒ | `3.12`/`1.24` | è¯­è¨€ç‰ˆæœ¬ |
| `dependencies_file` | âŒ | è‡ªåŠ¨æ£€æµ‹ | ä¾èµ–æ–‡ä»¶ |
| `launch_type` | âŒ | `local` | éƒ¨ç½²æ¨¡å¼ |
| `runtime_envs` | âŒ | `{}` | åº”ç”¨çº§ç¯å¢ƒå˜é‡ |

### Cloud/Hybrid æ¨¡å¼å­—æ®µ

| å­—æ®µ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `region` | `cn-beijing` | ç«å±±å¼•æ“åŒºåŸŸ |
| `image_tag` | `{{timestamp}}` | é•œåƒæ ‡ç­¾ |
| `cr_instance_name` | `Auto` | CR å®ä¾‹å |
| `cr_namespace_name` | `agentkit` | CR å‘½åç©ºé—´ |
| `cr_repo_name` | ç©ºï¼ˆç”¨ agent_nameï¼‰ | CR ä»“åº“å |
| `runtime_name` | `Auto` | Runtime åç§° |
| `runtime_envs` | `{}` | ç­–ç•¥çº§ç¯å¢ƒå˜é‡ |

### docker_build å­—æ®µ

| å­—æ®µ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `base_image` | è‡ªåŠ¨é€‰æ‹© | åŸºç¡€é•œåƒ |
| `build_script` | æ—  | æ„å»ºè„šæœ¬ |
| `regenerate_dockerfile` | `false` | å¼ºåˆ¶é‡æ–°ç”Ÿæˆ |
| `platform` | å½“å‰æ¶æ„ | ç›®æ ‡å¹³å° |

---

## ä¸‹ä¸€æ­¥

- ğŸ“– [CLI æ¦‚è§ˆ](./1.overview.md) - äº†è§£æ•´ä½“åŠŸèƒ½å’Œç‰¹æ€§
- ğŸ® [å‘½ä»¤è¯¦è§£](./2.commands.md) - å­¦ä¹ æ¯ä¸ªå‘½ä»¤çš„ç”¨æ³•
- ğŸš€ [å¿«é€Ÿå¼€å§‹](../1.introduction/3.quickstart.md) - åŠ¨æ‰‹å®è·µå®Œæ•´æµç¨‹
